const knex = require('./lib/index');
require('dotenv').config(); // Automatically loads `.env` from project root

knex.knex = knex;
knex.default = knex;

const dbConnection = {
  connectionString: process.env.DATABASE_URL,
  ssl: {
    rejectUnauthorized: false, // This disables SSL certificate verification, necessary for many hosted environments
  },
    // host: 'localhost',
    // user: 'postgres',
    // database: 'ecommercedb',
    // password: '2002',
    // port: 5432
}

// Initialize knex with the appropriate configuration
module.exports = knex({
  client: 'pg', // PostgreSQL client
  connection: dbConnection,
  pool: { min: 2, max: 10 },  // Optional pool configuration
});
